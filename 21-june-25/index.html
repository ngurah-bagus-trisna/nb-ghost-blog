<!DOCTYPE html>
<html lang="id">
<head>

    <title>21-June-25</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preload" as="style" href="/assets/built/screen.css?v=a90396e918">
    <link rel="preload" as="script" href="/assets/built/source.js?v=a90396e918">
    
    <link rel="preload" as="font" type="font/woff2" href="/assets/fonts/inter-roman.woff2?v=a90396e918" crossorigin="anonymous">
<style>
    @font-face {
        font-family: "Inter";
        font-style: normal;
        font-weight: 100 900;
        font-display: optional;
        src: url(/assets/fonts/inter-roman.woff2?v=a90396e918) format("woff2");
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
</style>

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=a90396e918">

    <style>
        :root {
            --background-color: #151515
        }
    </style>

    <script>
        /* The script for calculating the color contrast has been taken from
        https://gomakethings.com/dynamically-changing-the-text-color-based-on-background-color-contrast-with-vanilla-js/ */
        var accentColor = getComputedStyle(document.documentElement).getPropertyValue('--background-color');
        accentColor = accentColor.trim().slice(1);

        if (accentColor.length === 3) {
            accentColor = accentColor[0] + accentColor[0] + accentColor[1] + accentColor[1] + accentColor[2] + accentColor[2];
        }

        var r = parseInt(accentColor.substr(0, 2), 16);
        var g = parseInt(accentColor.substr(2, 2), 16);
        var b = parseInt(accentColor.substr(4, 2), 16);
        var yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;
        var textColor = (yiq >= 128) ? 'dark' : 'light';

        document.documentElement.className = `has-${textColor}-text`;
    </script>

    <meta name="description" content="Learn IAM Policies &amp; AWS Networking">
    <link rel="icon" href="https://twnb.nbtrisna.my.id/content/images/size/w256h256/2023/12/Logo-CHannel-1.png" type="image/png">
    <link rel="canonical" href="https://twnb.nbtrisna.my.id/21-june-25/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta property="og:site_name" content="twnb">
    <meta property="og:type" content="article">
    <meta property="og:title" content="21-June-25">
    <meta property="og:description" content="Learn IAM Policies &amp; AWS Networking">
    <meta property="og:url" content="https://twnb.nbtrisna.my.id/21-june-25/">
    <meta property="og:image" content="https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg">
    <meta property="article:published_time" content="2025-06-21T13:11:11.000Z">
    <meta property="article:modified_time" content="2025-06-21T14:00:30.000Z">
    <meta property="article:tag" content="daily-notes">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="21-June-25">
    <meta name="twitter:description" content="Learn IAM Policies &amp; AWS Networking">
    <meta name="twitter:url" content="https://twnb.nbtrisna.my.id/21-june-25/">
    <meta name="twitter:image" content="https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="I Gusti Ngurah Bagus Trisna Andika">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="daily-notes">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="800">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "twnb",
        "url": "https://twnb.nbtrisna.my.id/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://twnb.nbtrisna.my.id/content/images/2024/08/logo-Primary-1.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "I Gusti Ngurah Bagus Trisna Andika",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.gravatar.com/avatar/67669d72ccc65017961ab1d385f74c60?s=250&r=x&d=mp"
        },
        "url": "https://twnb.nbtrisna.my.id/author/ngurah/",
        "sameAs": []
    },
    "headline": "21-June-25",
    "url": "https://twnb.nbtrisna.my.id/21-june-25/",
    "datePublished": "2025-06-21T13:11:11.000Z",
    "dateModified": "2025-06-21T14:00:30.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg",
        "width": 1200,
        "height": 800
    },
    "keywords": "daily-notes",
    "description": "Learn IAM Policies &amp; AWS Networking",
    "mainEntityOfPage": "https://twnb.nbtrisna.my.id/21-june-25/"
}
    </script>

    <meta name="generator" content="Ghost 5.125">
    <link rel="alternate" type="application/rss+xml" title="twnb" href="https://twnb.nbtrisna.my.id/rss/">
    
    <script defer src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.5/umd/sodo-search.min.js" data-key="d8018a425f7cfc3913d46bfa03" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.5/umd/main.css" data-sodo-search="https://twnb.nbtrisna.my.id/" data-locale="id" crossorigin="anonymous"></script>
    
    <link href="https://twnb.nbtrisna.my.id/webmentions/receive/" rel="webmention">
    <script defer src="/public/cards.min.js?v=a90396e918"></script><style>:root {--ghost-accent-color: #b6bdff;}</style>
    <link rel="stylesheet" type="text/css" href="/public/cards.min.css?v=a90396e918">
    <meta name="google-site-verification" content="aJn625qTdbOQcWo6rLrtjWcfkTE6RlP1zdyLCECipdQ" />
<!-- Dracula Theme for Prism (Unpkg) -->
<link rel="stylesheet" href="https://unpkg.com/dracula-prism/dist/css/dracula-prism.css">

<!-- Line Numbers Plugin CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css">

<!-- Toolbar & Copy Button CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.css">

<!-- Fira Code Font -->
<link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">

<style>
  /* ── Wrapper & Terminal Chrome ───────────────────────────────────────── */
  .code-block-wrapper {
    position: relative;
    background: #282a36;
    border-radius: 6px;
    margin: 1.5rem 0;
    font-family: 'Fira Code', monospace;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  }

  /* Title bar */
  .code-block-wrapper .title-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 1.8rem;
    padding: 1.5rem 1rem;
    background: #21222c;
    color: #f8f8f2;
    font-size: 0.85rem;
    font-weight: 500;
    user-select: none;
  }
  
  /* MacOS style dots */
  .code-block-wrapper .title-bar .dots {
    display: flex;
    gap: 6px;
  }
  .code-block-wrapper .title-bar .dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
  }
  .code-block-wrapper .title-bar .dot-red {
    background: #ff5f56;
  }
  .code-block-wrapper .title-bar .dot-yellow {
    background: #ffbd2e;
  }
  .code-block-wrapper .title-bar .dot-green {
    background: #27c93f;
  }

  /* File name styling */
  .code-block-wrapper .file-name {
    color: #bd93f9;
    font-weight: normal;
    margin-left: 0.5rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 50%;
  }

  /* Hide default toolbar */
  .code-block-wrapper .code-toolbar > .toolbar {
    display: none !important;
  }

  /* Custom copy button - hidden by default */
  .code-block-wrapper .custom-copy-btn {
    position: absolute;
    top: 3rem;
    right: 0rem;
    background: rgba(40, 42, 54, 0.7);
    border: 1px solid #6272a4;
    border-radius: 3px;
    color: #f8f8f2;
    cursor: pointer;
    font-size: 0.8rem;
    padding: 0.25rem 0.5rem;
    opacity: 0;
    transition: opacity 0.2s;
    z-index: 10;
    font-family: 'Fira Code', monospace;
  }
  
  /* Show copy button on hover */
  .code-block-wrapper:hover .custom-copy-btn {
    opacity: 1;
  }
  
  .code-block-wrapper .custom-copy-btn:hover {
    background: rgba(68, 71, 90, 0.7);
  }

  /* Line numbers adjustments */
  pre.line-numbers {
    margin: 0;
    padding-top: 2.2rem !important;
    padding-bottom: 1rem !important;
  }
  
  /* Dynamic padding for line numbers */
  pre.line-numbers[data-line] {
    padding-left: 3.5rem !important; /* Default for 1-9 lines */
  }
  
  pre.line-numbers[data-line="10"] {
    padding-left: 3.8rem !important; /* 10-99 lines */
  }
  
  pre.line-numbers[data-line="100"] {
    padding-left: 4.2rem !important; /* 100-999 lines */
  }
  
  /* Adjust line numbers position */
  .line-numbers .line-numbers-rows {
    top: 2.2rem !important;
    width: auto !important;
    padding: 0 0.5rem;
    background: rgba(40, 42, 54, 0.5);
  }
  
  /* Adjust code padding */
  pre[class*="language-"] {
    padding-top: 2.2rem !important;
    padding-bottom: 1rem !important;
    padding-right: 1rem !important;
  }
  
  /* Better line number visibility */
  .line-numbers .line-numbers-rows > span:before {
    color: #6272a4 !important;
    padding-right: 1rem;
  }


    /* BEGIN IMAGE POST EDIT */
  .gh-article-image {
    position: relative;
    overflow: hidden;
    border-radius: 6px;
    margin-bottom: 1rem;
  }
  
  /* Gambar */
  .gh-article-image img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
    object-position: center;
    border-radius: 6px;
  }
  
  /* Figcaption normal di bawah */
  .gh-article-image figcaption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.7);
    color: #fff;
    font-size: 1rem;
    padding: 0.75rem 1rem;
    font-style: italic;
    line-height: 1.5;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
    backdrop-filter: blur(2px);
    z-index: 1;
  }

</style>
    <link rel="preconnect" href="https://fonts.bunny.net"><link rel="stylesheet" href="https://fonts.bunny.net/css?family=noto-sans:400,700|space-mono:400,700"><style>:root {--gh-font-heading: Noto Sans;--gh-font-body: Space Mono;}</style>

</head>
<body class="post-template tag-daily-notes gh-font-heading-noto-sans gh-font-body-space-mono has-sans-title has-sans-body">

<div class="gh-viewport">
    
    <header id="gh-navigation" class="gh-navigation is-left-logo gh-outer">
    <div class="gh-navigation-inner gh-inner">

        <div class="gh-navigation-brand">
            <a class="gh-navigation-logo is-title" href="https://twnb.nbtrisna.my.id">
                    <img src="https://twnb.nbtrisna.my.id/content/images/2024/08/logo-Primary-1.png" alt="twnb">
            </a>
            <button class="gh-search gh-icon-button" aria-label="Search this site" data-ghost-search>
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>            <button class="gh-burger gh-icon-button" aria-label="Menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,128ZM40,72H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16ZM216,184H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg>                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg>            </button>
        </div>

        <nav class="gh-navigation-menu">
            <ul class="nav">
    <li class="nav-home"><a href="https://twnb.nbtrisna.my.id/">Home</a></li>
    <li class="nav-daily-notes"><a href="https://twnb.nbtrisna.my.id/tag/daily-notes/">Daily Notes</a></li>
    <li class="nav-blog"><a href="https://twnb.nbtrisna.my.id/tag/catatan/">Blog</a></li>
    <li class="nav-about"><a href="https://twnb.nbtrisna.my.id/about/">About</a></li>
</ul>

        </nav>

        <div class="gh-navigation-actions">
                    <button class="gh-search gh-icon-button" aria-label="Search this site" data-ghost-search>
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button>        </div>

    </div>
</header>

    

<main class="gh-main">

    <article class="gh-article post tag-daily-notes">

        <header class="gh-article-header gh-canvas">

                <a class="gh-article-tag" href="https://twnb.nbtrisna.my.id/tag/daily-notes/">daily-notes</a>
            <h1 class="gh-article-title is-title">21-June-25</h1>
                <p class="gh-article-excerpt is-body">Learn IAM Policies &amp; AWS Networking</p>


                <figure class="gh-article-image">
        <img
            srcset="https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg 320w,
                    https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg 600w,
                    https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg 960w,
                    https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg 1200w,
                    https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg 2000w"
            sizes="(max-width: 1200px) 100vw, 1120px"
            src="https://photoby.nbtrisna.my.id/820cd488-1486-482a-932f-08f6e63d1fc1.jpg"
            alt="21-June-25"
        >
            <figcaption><b><strong style="white-space: pre-wrap;">Photo by nbtrisna</strong></b><span style="white-space: pre-wrap;"> Beneath the ornate gate, a tranquil street scene unfolds, blending timeless Balinese spirit with urban flow.</span></figcaption>
    </figure>

        </header>

        <section class="gh-content gh-canvas is-body">
            <h2 id="daily-quest-2-least-privilege-iam-policies">Daily Quest #2: Least-Privilege IAM Policies</h2><blockquote>IAM (Identity &amp; Access Management) is a web service that helps you securely control access to AWS Resources. On this day, i learn to craft and attach the minimal set of permissions erquired for EC-2 based application, following the principle of least privilage</blockquote><p><strong>Reference</strong> :</p><ul><li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html?ref=dev.nbtrisna.my.id">What is IAM?</a></li><li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html?ref=dev.nbtrisna.my.id">Security best practices in IAM</a> &lt;- Recomended to read this for first time using AWS Resources</li></ul><p><strong>Skenario :</strong> Create <code>IAM Policy</code> to only permit <code>DescribeInstances, DescribeSubnets, DescribeVpcs</code>, And scope to aws account's resources.</p><h3 id="iam-policy">IAM Policy</h3><blockquote>IAM Policy is feature to manage access in AWS. A policy is an object in AWS that, when associated with an identity or resource, defines their permissions</blockquote><p>Reference :</p><ul><li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html?ref=dev.nbtrisna.my.id">https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html</a></li></ul><p>Access to IAM Policy</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621113842.png" class="kg-image" alt="Pasted image 20250621113842" loading="lazy" width="1062" height="527"></figure><p>Then open <code>Policy</code> menu in <code>IAM Dashboard</code>, select <code>Create Policy</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621114121.png" class="kg-image" alt="Pasted image 20250621114121" loading="lazy" width="1863" height="613"></figure><p>Select what resources to <code>Allow</code> or deny to access. On this section, i want to allow policy to <code>Describe instances, subnets, and VPCs</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621114539.png" class="kg-image" alt="Pasted image 20250621114539" loading="lazy" width="1855" height="930"></figure><p>After all correct, begin to create Policy be click <code>Create Policy</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621114707.png" class="kg-image" alt="Pasted image 20250621114707" loading="lazy" width="1868" height="908"></figure><h3 id="iam-role">IAM Role</h3><blockquote>Object on AWS to assign spesific permission to account.</blockquote><p>Now after policy created, we can attach policy to <code>IAM Role</code>. Navigate to <code>Roles &gt; Create Role</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621120646.png" class="kg-image" alt="Pasted image 20250621120646" loading="lazy" width="1613" height="700"></figure><p>Then configure trusted entity. For this, i configure entity type to <code>AWS Service</code>, and Usecase to <code>EC2</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621120818.png" class="kg-image" alt="Pasted image 20250621120818" loading="lazy" width="1851" height="915"></figure><p>Search permission policy, and next</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621120954.png" class="kg-image" alt="Pasted image 20250621120954" loading="lazy" width="1603" height="838"></figure><p>Enter name of roles, check again. If all correct, begin to create Role.</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621121129.png" class="kg-image" alt="Pasted image 20250621121129" loading="lazy" width="1600" height="946"></figure><h3 id="check-if-role-correct">Check If Role Correct</h3><p>To test role, we need to attach <code>instance-profile</code> to VM. And then testing to <code>describe</code> and <code>terminate</code></p><p>Access to <code>EC2 &gt; Instances</code> to assign new role.</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621124108.png" class="kg-image" alt="Pasted image 20250621124108" loading="lazy" width="1876" height="575"></figure><p>Attach Role &gt; and update IAM role</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621124135.png" class="kg-image" alt="Pasted image 20250621124135" loading="lazy" width="1528" height="341"></figure><blockquote>To test, you need to access instances/vm via ssh.</blockquote><h3 id="testing">Testing</h3><p>Testing to describe-instances</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621131604.png" class="kg-image" alt="Pasted image 20250621131604" loading="lazy" width="724" height="349"></figure><p>Testing destroy</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621131544.png" class="kg-image" alt="Pasted image 20250621131544" loading="lazy" width="1176" height="209"></figure><blockquote><strong>Real World Usecase</strong> : Using IAM Roles with the principle of least privilege on EC2 instances is essential for maintaining security and operational efficiency. For example, a web application hosted on an EC2 instance may need to access files stored in Amazon S3, such as images or configuration data. Instead of hardcoding access keys—which poses security risks and is difficult to manage—an IAM Role allows the EC2 instance to securely access these resources using temporary credentials managed automatically by AWS</blockquote><p><strong>Question :</strong></p><ul><li><strong>Why is it dangerous</strong> to attach <code>AdministratorAccess</code> to long-lived roles or CI/CD runners?</li><li><strong>How would you modify</strong> this policy if a Lambda function needed <strong>read-only</strong> access to <strong>only</strong> a specific S3 bucket?</li></ul><p><strong>Answer</strong> :</p><ul><li>Attach <code>AdministratorAccess</code> to ci/cd runners can potentialy have risk to manage all aws resources in instance without strict permission</li><li>I need to create policy called <code>S3ReadWrite</code> with policy allow to readwrite S3 storage, and associate to lamda (i never try before, but i get the point using least-privilage)</li></ul><h2 id="daily-quest-3-aws-networking-vpc-deep-dive">Daily Quest #3: AWS Networking &amp; VPC Deep Dive</h2><blockquote>Multi-tier network (public and private subnets) use for production use-case like connecting web servers to database. You don't need web-server comunicate to database exposed to internet. Instead we can use <code>private-network</code> to connect beetween web-server and database. To expose web-server we can use <code>internet-gateway</code>.</blockquote><p>Reference :</p><ul><li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/working-with-vpcs.html?ref=dev.nbtrisna.my.id#AddaSubnet">Create Subnet AWS</a></li><li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html?ref=dev.nbtrisna.my.id">Nat Gateways</a></li></ul><p><strong>Real World Usecase</strong> : In production web server and database recomend to use private network when comunicate each other. Using private network, need <code>Nat Gateway</code> to access intenet without exposing directly to the internet.</p><p><strong>Skenario</strong> : Creating 2 instances, first instance alocated Elastic IP and second instance doesn't attach elasticIP. Two instances connected between private-network. Makesure all instances can access internet</p><h3 id="subnet">Subnet</h3><blockquote>Subnet is range IP Addresses in VPC</blockquote><p>Create new subnet <code>10.0.2.0/24</code>, but mark it as <em>private</em> it means doesn't need to associate external gateway. Navigate to <code>VPC &gt; Subnets</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621175908.png" class="kg-image" alt="Pasted image 20250621175908" loading="lazy" width="1200" height="714"></figure><p>To create, click <code>Create Subnet</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621180215.png" class="kg-image" alt="Pasted image 20250621180215" loading="lazy" width="1612" height="421"></figure><p>Configure subnet we want to create</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621180609.png" class="kg-image" alt="Pasted image 20250621180609" loading="lazy" width="1514" height="823"></figure><p>Result, subnet <code>dev-subnet</code> created</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621180645.png" class="kg-image" alt="Pasted image 20250621180645" loading="lazy" width="1633" height="256"></figure><h3 id="nat-gateway">Nat Gateway</h3><blockquote>NAT Gateway is service you can use to private csubnet can connect to service outside your VPC but external services can't initiate a connection with those instances.</blockquote><p>When you create NAT gateway, you specisfy one of the following connectivity types :</p><ul><li><strong>Public</strong> : (Default) Instances in private subnets can connect to internet through a public NAT gateway, but the instances can't recive inbound connection from the internet</li><li><strong>Private</strong> : Instances in private subnets can connect to other VPCs on your on premises network through a private NAT gateway, but instances can't recive inbound connection other VPCs or the on-premises network. The defference with <strong>Public</strong> is You can route traffic from the NAT gateway through a transit gateway or a virtual private gateway. You can't associate an elastic IP address with a private NAT gateway. You can attach an internet gateway to a VPC with a private NAT gateway, but if you route traffic from the private NAT gateway to the internet gateway, the internet gateway drops the traffic.</li></ul><p>I want to create <em>Public</em> gateway, so first we need to <em>Associate ElasticIP</em> for launch <em>Nat Gateway</em> then. ElasticIP need to create because to NAT all private subnet to connect internet over ElasticIP.</p><p>Navigate to <code>VPC &gt; Elastic IPs &gt; Associate Elastic IP address</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621182931.png" class="kg-image" alt="Pasted image 20250621182931" loading="lazy" width="1870" height="595"></figure><p>Allocate Elastic IPs</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621183239.png" class="kg-image" alt="Pasted image 20250621183239" loading="lazy" width="1738" height="691"></figure><p>Then we begin to create NAT Gateway</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621183343.png" class="kg-image" alt="Pasted image 20250621183343" loading="lazy" width="1868" height="468"></figure><p>Configure public-subnet to use nat gateway</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621183724.png" class="kg-image" alt="Pasted image 20250621183724" loading="lazy" width="1724" height="671"></figure><p>Result,</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621185952.png" class="kg-image" alt="Pasted image 20250621185952" loading="lazy" width="1651" height="130"></figure><p>Edit route private subnets route table so that <code>0.0.0.0/0</code> point to Nat Gateway instead of IGW</p><p>Access to <code>VPC &gt; Route Tables &gt; Your private-subnet/VPC Route ID</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621185208.png" class="kg-image" alt="Pasted image 20250621185208" loading="lazy" width="1872" height="459"></figure><p>Edit Routes</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621185310.png" class="kg-image" alt="Pasted image 20250621185310" loading="lazy" width="1478" height="421"></figure><p>Add new route, select <code>0.0.0.0/0</code>, configure target to Nat Gatway, than Save</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621185355.png" class="kg-image" alt="Pasted image 20250621185355" loading="lazy" width="1452" height="188"></figure><p>Then result</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621190041.png" class="kg-image" alt="Pasted image 20250621190041" loading="lazy" width="1457" height="431"></figure><h3 id="testing-1">Testing</h3><p>Create EC2 Instance, first attach to public-subnet, and then another to private-subnet. One instance on public-subnet attach elastic_IP to access SSH. And instance with private_subnet don't attach Elastic IP. Only private network.</p><p><strong>VM : pub-instance</strong></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621190625.png" class="kg-image" alt="Pasted image 20250621190625" loading="lazy" width="917" height="813"></figure><p><strong>VM : private-instance</strong></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621190820.png" class="kg-image" alt="Pasted image 20250621190820" loading="lazy" width="984" height="830"></figure><p>Access to <code>pub-instance</code>, testing curl to <code>https://ifconfig.me</code></p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621205656.png" class="kg-image" alt="Pasted image 20250621205656" loading="lazy" width="1647" height="74"></figure><p>In <em>public-instance</em> we using <code>ElasticIP</code> from attached</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621205732.png" class="kg-image" alt="Pasted image 20250621205732" loading="lazy" width="414" height="41"></figure><p>To access <em>private-instance</em> we have to access <em>public_instance</em> then ssh <em>private-instance</em> using private-ip.</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621205919.png" class="kg-image" alt="Pasted image 20250621205919" loading="lazy" width="1631" height="54"></figure><p>In <em>private-instance</em> we get publicIp from natGateway</p><figure class="kg-card kg-image-card"><img src="https://img.nbtrisna.my.id/Pasted%20image%2020250621205947.png" class="kg-image" alt="Pasted image 20250621205947" loading="lazy" width="431" height="56"></figure>
        </section>

    </article>


</main>


            <section class="gh-container is-grid gh-outer">
                <div class="gh-container-inner gh-inner">
                    <h2 class="gh-container-title">Read more</h2>
                    <div class="gh-feed">
                            <article class="gh-card post no-image">
    <a class="gh-card-link" href="/22-june-25/">
            <figure class="gh-card-image">
                <img
                    srcset="https://photoby.nbtrisna.my.id/1e929f06-0136-4b70-8924-cd9e66ff281b.jpg 160w,
                            https://photoby.nbtrisna.my.id/1e929f06-0136-4b70-8924-cd9e66ff281b.jpg 320w,
                            https://photoby.nbtrisna.my.id/1e929f06-0136-4b70-8924-cd9e66ff281b.jpg 600w,
                            https://photoby.nbtrisna.my.id/1e929f06-0136-4b70-8924-cd9e66ff281b.jpg 960w,
                            https://photoby.nbtrisna.my.id/1e929f06-0136-4b70-8924-cd9e66ff281b.jpg 1200w,
                            https://photoby.nbtrisna.my.id/1e929f06-0136-4b70-8924-cd9e66ff281b.jpg 2000w"
                    sizes="320px"
                    src="https://photoby.nbtrisna.my.id/1e929f06-0136-4b70-8924-cd9e66ff281b.jpg"
                    alt="22-June-25"
                    loading="lazy"
                >
            </figure>
        <div class="gh-card-wrapper">
            <h3 class="gh-card-title is-title">22-June-25</h3>
                <p class="gh-card-excerpt is-body">Learn IAM Roles, EC2 Instance Profile &amp; Provisioning VPC using Iaac (Terraform)</p>
            <footer class="gh-card-meta">
<!--
             -->
                    <span class="gh-card-author">By I Gusti Ngurah Bagus Trisna Andika</span>
                    <time class="gh-card-date" datetime="2025-06-22">22 Jun 2025</time>
                <!--
         --></footer>
        </div>
    </a>
</article>
                            <article class="gh-card post no-image">
    <a class="gh-card-link" href="/20-june-25/">
            <figure class="gh-card-image">
                <img
                    srcset="https://photoby.nbtrisna.my.id/967d5953-56e2-4a9f-b472-444faa0076cd.jpg 160w,
                            https://photoby.nbtrisna.my.id/967d5953-56e2-4a9f-b472-444faa0076cd.jpg 320w,
                            https://photoby.nbtrisna.my.id/967d5953-56e2-4a9f-b472-444faa0076cd.jpg 600w,
                            https://photoby.nbtrisna.my.id/967d5953-56e2-4a9f-b472-444faa0076cd.jpg 960w,
                            https://photoby.nbtrisna.my.id/967d5953-56e2-4a9f-b472-444faa0076cd.jpg 1200w,
                            https://photoby.nbtrisna.my.id/967d5953-56e2-4a9f-b472-444faa0076cd.jpg 2000w"
                    sizes="320px"
                    src="https://photoby.nbtrisna.my.id/967d5953-56e2-4a9f-b472-444faa0076cd.jpg"
                    alt="20-June-25"
                    loading="lazy"
                >
            </figure>
        <div class="gh-card-wrapper">
            <h3 class="gh-card-title is-title">20-June-25</h3>
                <p class="gh-card-excerpt is-body">Learn about basic VPC, subnet, IGW (Internet Gateway), SG (Security Group), and EC2 using AWS Free Tier.</p>
            <footer class="gh-card-meta">
<!--
             -->
                    <span class="gh-card-author">By I Gusti Ngurah Bagus Trisna Andika</span>
                    <time class="gh-card-date" datetime="2025-06-20">20 Jun 2025</time>
                <!--
         --></footer>
        </div>
    </a>
</article>
                            <article class="gh-card post no-image">
    <a class="gh-card-link" href="/19-june-25/">
            <figure class="gh-card-image">
                <img
                    srcset="https://photoby.nbtrisna.my.id/3a4489b7-1846-4855-8306-8a885e6ac289.jpg 160w,
                            https://photoby.nbtrisna.my.id/3a4489b7-1846-4855-8306-8a885e6ac289.jpg 320w,
                            https://photoby.nbtrisna.my.id/3a4489b7-1846-4855-8306-8a885e6ac289.jpg 600w,
                            https://photoby.nbtrisna.my.id/3a4489b7-1846-4855-8306-8a885e6ac289.jpg 960w,
                            https://photoby.nbtrisna.my.id/3a4489b7-1846-4855-8306-8a885e6ac289.jpg 1200w,
                            https://photoby.nbtrisna.my.id/3a4489b7-1846-4855-8306-8a885e6ac289.jpg 2000w"
                    sizes="320px"
                    src="https://photoby.nbtrisna.my.id/3a4489b7-1846-4855-8306-8a885e6ac289.jpg"
                    alt="19-June-25"
                    loading="lazy"
                >
            </figure>
        <div class="gh-card-wrapper">
            <h3 class="gh-card-title is-title">19-June-25</h3>
                <p class="gh-card-excerpt is-body">Create pipeline with lint &amp; unit test, terraform, iaac testing (using terratest), Docker Build &amp; Security Scan (Trivy), Deploy, Smoke Test &amp; Metrics Scrape, Cleanup &amp; Notification</p>
            <footer class="gh-card-meta">
<!--
             -->
                    <span class="gh-card-author">By I Gusti Ngurah Bagus Trisna Andika</span>
                    <time class="gh-card-date" datetime="2025-06-19">19 Jun 2025</time>
                <!--
         --></footer>
        </div>
    </a>
</article>
                            <article class="gh-card post no-image">
    <a class="gh-card-link" href="/18-june-25/">
            <figure class="gh-card-image">
                <img
                    srcset="https://photoby.nbtrisna.my.id/e7be8378-6c86-473e-b6fd-b78721e50f15.jpg 160w,
                            https://photoby.nbtrisna.my.id/e7be8378-6c86-473e-b6fd-b78721e50f15.jpg 320w,
                            https://photoby.nbtrisna.my.id/e7be8378-6c86-473e-b6fd-b78721e50f15.jpg 600w,
                            https://photoby.nbtrisna.my.id/e7be8378-6c86-473e-b6fd-b78721e50f15.jpg 960w,
                            https://photoby.nbtrisna.my.id/e7be8378-6c86-473e-b6fd-b78721e50f15.jpg 1200w,
                            https://photoby.nbtrisna.my.id/e7be8378-6c86-473e-b6fd-b78721e50f15.jpg 2000w"
                    sizes="320px"
                    src="https://photoby.nbtrisna.my.id/e7be8378-6c86-473e-b6fd-b78721e50f15.jpg"
                    alt="18-June-25"
                    loading="lazy"
                >
            </figure>
        <div class="gh-card-wrapper">
            <h3 class="gh-card-title is-title">18-June-25</h3>
                <p class="gh-card-excerpt is-body">Performance optimization in ci/cd pipeline focus on faster build &amp; test for example using feature like caching, and pararel jobs</p>
            <footer class="gh-card-meta">
<!--
             -->
                    <span class="gh-card-author">By I Gusti Ngurah Bagus Trisna Andika</span>
                    <time class="gh-card-date" datetime="2025-06-18">18 Jun 2025</time>
                <!--
         --></footer>
        </div>
    </a>
</article>
                    </div>
                </div>
            </section>

    
    <footer class="gh-footer gh-outer">
    <div class="gh-footer-inner gh-inner">

        <div class="gh-footer-bar">
            <span class="gh-footer-logo is-title">
                    <img src="https://twnb.nbtrisna.my.id/content/images/2024/08/logo-Primary-1.png" alt="twnb">
            </span>
            <nav class="gh-footer-menu">
                
            </nav>
            <div class="gh-footer-copyright">
                Powered by <a href="https://ghost.org/" target="_blank" rel="noopener">Ghost</a>
            </div>
        </div>


    </div>
</footer>    
</div>

    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="pswp__bg"></div>

    <div class="pswp__scroll-wrap">
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
<script src="/assets/built/source.js?v=a90396e918"></script>

<!-- Prism Core & Components -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-yaml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-json.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-typescript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-docker.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("pre").forEach(pre => {
    const code = pre.querySelector("code");
    if (!code) return;

    // 1) Ensure line-numbers
    pre.classList.add("line-numbers");

    // 2) Wrap with terminal chrome
    const wrapper = document.createElement("div");
    wrapper.className = "code-block-wrapper";
    pre.parentNode.insertBefore(wrapper, pre);
    wrapper.appendChild(pre);

    // 3) Extract file name from class
    let fileName = null;
    const fileNameMatch = code.className.match(/file:([^\s]+)/);
    if (fileNameMatch) {
      fileName = fileNameMatch[1];
      // Remove file class to prevent conflicts
      code.className = code.className.replace(fileNameMatch[0], "");
    }

    // 4) Get language
    const langMatch = code.className.match(/language-([a-zA-Z0-9]+)/);
    const lang = langMatch ? langMatch[1].toUpperCase() : "CODE";
    
    // Create custom copy button
    const copyBtn = document.createElement("button");
    copyBtn.className = "custom-copy-btn";
    copyBtn.textContent = "Copy";
    copyBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      navigator.clipboard.writeText(code.textContent);
      const originalText = copyBtn.textContent;
      copyBtn.textContent = "Copied!";
      setTimeout(() => {
        copyBtn.textContent = originalText;
      }, 2000);
    });

    // Create title bar with MacOS style dots
    const bar = document.createElement("div");
    bar.className = "title-bar";
    
    // Add file name if exists
    let titleContent = `
      <div class="dots">
        <span class="dot dot-red"></span>
        <span class="dot dot-yellow"></span>
        <span class="dot dot-green"></span>
      </div>
      <span class="name">${lang}</span>
    `;
    
    if (fileName) {
      titleContent += `<span class="file-name">${fileName}</span>`;
    }
    
    bar.innerHTML = titleContent;
    
    wrapper.insertBefore(bar, pre);
    wrapper.appendChild(copyBtn);
    
    // Add data-line attribute for dynamic padding
    const lineCount = pre.textContent.split('\n').length;
    pre.setAttribute('data-line', lineCount);
  });

  Prism.highlightAll();
  
  // Adjust line numbers after highlighting
  setTimeout(() => {
    document.querySelectorAll('pre.line-numbers').forEach(pre => {
      const lineNumbers = pre.querySelector('.line-numbers-rows');
      if (lineNumbers) {
        // Set dynamic width based on line count
        const lines = pre.textContent.split('\n').length;
        const digits = Math.floor(Math.log10(lines)) + 1;
        lineNumbers.style.width = `${digits * 0.8 + 2}em`;
      }
    });
  }, 100);
});

document.addEventListener('DOMContentLoaded', function() {
  const footer = document.querySelector('.gh-footer-copyright');
  if (footer) {
    footer.textContent = '© 2025 TWNB. All rights reserved.';
  }
});
</script>

</body>
</html>
